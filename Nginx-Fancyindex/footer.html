<div id="raw_include_README_md"></div>
<footer>
    Internal Use Only.
</footer>
    <script src="/Nginx-Fancyindex/addNginxFancyIndexForm.js" defer></script>
    <script src="/Nginx-Fancyindex/showdown.min.js"></script>
    <script>
    (function () {
        'use strict';

        // Wait for showdown to be available
        if (typeof showdown === 'undefined') {
            console.warn('Showdown library not loaded, markdown rendering disabled');
            return;
        }

        const converter = new showdown.Converter({ tables: true });

        function findListingLink(name) {
            const links = document.querySelectorAll('#list tbody tr td a');
            return Array.from(links).find(link => link.textContent.trim() === name) || null;
        }

        function removeElement(element) {
            element?.remove();
        }

        function renderMarkdown(targetId, source) {
            const target = document.getElementById(targetId);
            if (!target || !findListingLink(source)) {
                removeElement(target);
                return;
            }

            // Show loading state
            target.innerHTML = '<p class="markdown-loading" style="color: var(--muted); font-style: italic; padding: 1rem;">Loading...</p>';

            fetch(source)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    return response.text();
                })
                .then(text => {
                    const normalized = text.replace(/\n[ ]*/g, '\n');
                    target.innerHTML = converter.makeHtml(normalized);
                })
                .catch(() => {
                    removeElement(target);
                });
        }

        renderMarkdown('raw_include_HEADER_md', 'HEADER.md');
        renderMarkdown('raw_include_README_md', 'README.md');
    }());
    </script>
</body>
</html>
<!--
footer.html
-->
